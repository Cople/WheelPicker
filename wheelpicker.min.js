!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.WheelPicker=i():t.WheelPicker=i()}(this,function(){return function(t){function i(s){if(e[s])return e[s].exports;var n=e[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){"use strict";function s(t){this.options=n.extend({data:[],rows:5,rowHeight:34,parseValue:function(t){return t.join(" ")}},t),this.options.el&&(this.input="string"==typeof this.options.el?document.querySelector(this.options.el):this.options.el,this.input.setAttribute("readonly",!0)),this.value=[],this.wheels=[],this.closed=!0,this.disabled=!1,this.transformName=n.prefixed("transform"),this.transitionName=n.prefixed("transition"),this.transitionendName={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionEnd",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[this.transitionName],this._init()}e(1);var n=e(3),o=e(4);s.prototype={_init:function(){this._createDom();for(var t=0,i=this.options.data.length;t<i;t++)this.wheels.push(new o(this.wheelsContainer,{rows:this.options.rows,rowHeight:this.options.rowHeight,data:this.options.data[t],value:this.options.value?this.options.value[t]:null,onSelect:this._onChange.bind(this,t)}));this.options.title&&(this.container.querySelector(".wheelpicker-title").innerHTML=this.options.title),this.container.querySelector(".wheelpicker-mask-top").style.height=this.container.querySelector(".wheelpicker-mask-btm").style.height=this.options.rowHeight*Math.floor(this.options.rows/2)-1+"px",this._bindEvents(),this.options.value&&this._set(!0)},_createDom:function(){this.container=document.createElement("div"),this.container.className="wheelpicker",this.options.id&&(this.container.id="wheelpicker-"+this.options.id),this.container.innerHTML="<div class='wheelpicker-backdrop'></div><div class='wheelpicker-panel'><div class='wheelpicker-actions'><button type='button' class='btn-cancel'>取消</button><button type='button' class='btn-set'>确定</button><h4 class='wheelpicker-title'></h4></div><div class='wheelpicker-main'><div class='wheelpicker-wheels'></div><div class='wheelpicker-mask wheelpicker-mask-top'></div><div class='wheelpicker-mask wheelpicker-mask-current'></div><div class='wheelpicker-mask wheelpicker-mask-btm'></div></div></div>",this.wheelsContainer=this.container.querySelector(".wheelpicker-wheels"),this.options.onRender&&this.options.onRender.call(this,this.container),document.body.appendChild(this.container)},_bindEvents:function(){this.input&&this.input.addEventListener("focus",this.show.bind(this)),this.options.hideOnBackdrop&&this.container.querySelector(".wheelpicker-backdrop").addEventListener("click",this._cancel.bind(this)),this.container.querySelector(".wheelpicker-actions .btn-cancel").addEventListener("click",this._cancel.bind(this)),this.container.querySelector(".wheelpicker-actions .btn-set").addEventListener("click",this._set.bind(this)),this.container.querySelector(".wheelpicker-backdrop").addEventListener(this.transitionendName,this._backdropTransEnd.bind(this))},_onChange:function(t){this.options.onChange&&this.options.onChange.call(this,this.getVal(),t)},_backdropTransEnd:function(){this.container.classList.contains("shown")||(this.container.style.display="none",this.closed=!0,this.restore&&this.wheels.forEach(function(t,i){t.setData(this._tempData[i])},this),this.setVal(this.value))},_set:function(t){this.value=this.getVal(),this.input&&!this.cancelled&&(this.input.value=this.options.parseValue(this.value)),this.cancelled=!1,t!==!0&&(this.options.onSelect&&this.options.onSelect.call(this,this.getVal()),this.container.classList.remove("shown"))},_cancel:function(){this.cancelled=!0,this.changed&&(this.restore=!0),this.options.onCancel&&this.options.onCancel.call(this),this.container.classList.remove("shown")},show:function(){if(!this.disabled&&this.closed){var t=this.container;this.closed=this.changed=this.restore=!1,this._tempData=this.getData(),t.style.display="block",setTimeout(function(){t.classList.add("shown")},10),this.options.onShow&&this.options.onShow.call(this)}},hide:function(){this.disabled||this.closed||this._cancel()},getVal:function(t){return"number"==typeof t?this.wheels[t].getVal():this.wheels.map(function(t){return t.getVal()})},setVal:function(t,i){if(!this.disabled){var e=this.closed;"number"==typeof i?this.wheels[i].setVal(t,e):this.wheels.forEach(function(i,s){i.setVal(t[s],e)}),this.closed&&this._set(!0)}},getData:function(t){return"number"==typeof t?this.wheels[t].getData():this.wheels.map(function(t){return t.getData()})},setData:function(t,i,e){this.disabled||(this.changed=!0,"number"==typeof i?this.wheels[i].setData(t,e):(n.isArray(i)&&(e=i),this.wheels.forEach(function(i,s){i.setData(t[s],e?e[s]:null)})),this.closed&&this._set(!0))},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},destory:function(){this.disable(),this.container.parentNode.removeChild(this.container),this.input&&this.input.removeAttribute("readonly")}},t.exports=s},function(t,i){},,function(t,i){"use strict";t.exports={extend:Object.assign||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},prefixed:function(t){var i,e=document.createElement("div").style,s=["Webkit","Moz","ms","O"];if(t in e)return t;for(var n=0,o=s.length;n<o;n++)if(i=s[n]+t.charAt(0).toUpperCase()+t.substring(1),i in e)return i;return null},getStyle:function(t,i){return i=i.replace(/([A-Z])/g,"-$1"),i=i.toLowerCase(),window.getComputedStyle(t,null).getPropertyValue(i)},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}},function(t,i,e){"use strict";function s(t,i){this.container="string"==typeof t?document.querySelector(t):t,this.data=[],this.items=[],this.y=0,this.selectedIndex=0,this.isTransition=!1,this.isTouching=!1,this.easings={scroll:"cubic-bezier(0.23, 1, 0.32, 1)",scrollBounce:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",bounce:"cubic-bezier(0.165, 0.84, 0.44, 1)"},this.options=n.extend({data:[],rows:5,rowHeight:34,adjustTime:400,bounceTime:600,momentumThresholdTime:300,momentumThresholdDistance:10},i),this.options.rows%2===0&&this.options.rows++,this.pointerEvents="ontouchstart"in window?{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}:{start:"mousedown",move:"mousemove",end:"mouseup",cancel:"mouseleave"},this.transformName=n.prefixed("transform"),this.transitionName=n.prefixed("transition"),this.transitionendName={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionEnd",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[this.transitionName],this._init()}var n=e(3);s.prototype={_init:function(){this._createDom(),this._bindEvents()},_createDom:function(){this.wheel=document.createElement("div"),this.wheel.className="wheelpicker-wheel",this.scroller=document.createElement("ul"),this.scroller.className="wheelpicker-wheel-scroller",this.setData(this.options.data,this.options.value),this.wheel.style.height=this.options.rowHeight*this.options.rows+"px",this.scroller.style.marginTop=this.options.rowHeight*Math.floor(this.options.rows/2)+"px",this.wheelHeight=this.wheel.offsetHeight,this.wheel.appendChild(this.scroller),this.container.appendChild(this.wheel)},_momentum:function(t,i,e,s,n,o,h){var r,a,l=t-i,c=Math.abs(l)/e;return o=void 0===o?6e-4:o,r=t+c*c/(2*o)*(l<0?-1:1),a=c/o,r=Math.round(r/h)*h,r<s?(r=n?s-n/2.5*(c/8):s,l=Math.abs(r-t),a=l/c):r>0&&(r=n?n/2.5*(c/8):0,l=Math.abs(t)+r,a=l/c),{destination:Math.round(r),duration:a}},_resetPosition:function(t){var i=this.y;return t=t||0,i>0&&(i=0),i<this.maxScrollY&&(i=this.maxScrollY),i!=this.y&&(this._scrollTo(i,t,this.easings.bounce),!0)},_getClosestSelectablePosition:function(t){var i=Math.abs(Math.round(t/this.options.rowHeight));if(!this.data[i].disabled)return t;for(var e=Math.max(i,this.data.length-i),s=1;s<=e;s++){if(!this.data[i+s].disabled){i+=s;break}if(!this.data[i-s].disabled){i-=s;break}}return i*-this.options.rowHeight},_scrollTo:function(t,i,e){return this.y===t?(this._scrollFinish(),!1):(this.y=this._getClosestSelectablePosition(t),this.scroller.style[this.transformName]="translate3d(0,"+this.y+"px,0)",void(i&&i>0?(this.isTransition=!0,this.scroller.style[this.transitionName]=i+"ms "+e):this._scrollFinish()))},_scrollFinish:function(){var t=Math.abs(this.y/this.options.rowHeight);this.selectedIndex!=t&&(this.items[this.selectedIndex].classList.remove("wheelpicker-item-selected"),this.items[t].classList.add("wheelpicker-item-selected"),this.selectedIndex=t,this.options.onSelect&&this.options.onSelect(this.data[t],t))},_getCurrentY:function(){var t=n.getStyle(this.scroller,this.transformName).match(/-?\d+(\.\d+)?/g);return parseInt(t[t.length-1])},_start:function(t){t.preventDefault(),this.isTransition&&(this.isTransition=!1,this.y=this._getCurrentY(),this.scroller.style[this.transformName]="translate3d(0,"+this.y+"px,0)",this.scroller.style[this.transitionName]=""),this.startY=this.y,this.lastY=t.touches?t.touches[0].pageY:t.pageY,this.startTime=Date.now(),this.isTouching=!0},_move:function(t){if(!this.isTouching)return!1;var i=t.changedTouches?t.changedTouches[0].pageY:t.pageY,e=i-this.lastY,s=this.y+e,n=Date.now();return this.lastY=i,(s>0||s<this.maxScrollY)&&(s=this.y+e/3),this.y=Math.round(s),this.scroller.style[this.transformName]="translate3d(0,"+this.y+"px,0)",n-this.startTime>this.momentumThresholdTime&&(this.startTime=n,this.startY=i),!1},_end:function(t){var i,e,s=Date.now()-this.startTime,n=this.options.adjustTime,o=this.easings.scroll,h=Math.abs(this.y-this.startY);return this.isTouching=!1,s<this.options.momentumThresholdTime&&h<=10&&t.target.classList.contains("wheelpicker-item")?(this._scrollTo(t.target._wsIdx*-this.options.rowHeight,n,o),!1):void(this._resetPosition(this.options.bounceTime)||(s<this.options.momentumThresholdTime&&h>this.options.momentumThresholdDistance?(i=this._momentum(this.y,this.startY,s,this.maxScrollY,this.wheelHeight,7e-4,this.options.rowHeight),e=i.destination,n=i.duration):e=Math.round(this.y/this.options.rowHeight)*this.options.rowHeight,(e>0||e<this.maxScrollY)&&(o=this.easings.scrollBounce),this._scrollTo(e,n,o)))},_transitionEnd:function(){this.isTransition=!1,this.scroller.style[this.transitionName]="",this._resetPosition(this.options.bounceTime)||this._scrollFinish()},_bindEvents:function(){this.wheel.addEventListener(this.pointerEvents.start,this._start.bind(this)),this.wheel.addEventListener(this.pointerEvents.move,this._move.bind(this)),this.wheel.addEventListener(this.pointerEvents.end,this._end.bind(this)),this.wheel.addEventListener(this.pointerEvents.cancel,this._end.bind(this)),this.scroller.addEventListener(this.transitionendName,this._transitionEnd.bind(this))},getData:function(){return this.data},setData:function(t,i){var e=i||t[0].value||t[0];this.items=[],this.scroller.innerHTML="",this.data=t.map(function(t,i){var s=document.createElement("li");return s.className="wheelpicker-item",t="object"==typeof t?t:{text:t,value:t},t.disabled&&(s.className+=" wheelpicker-item-disabled"),t.value===e&&(s.className+=" wheelpicker-item-selected",this.selectedIndex=i),s._wsIdx=i,s.innerHTML=t.text,this.items.push(s),this.scroller.appendChild(s),t},this),this.y=this.selectedIndex*-this.options.rowHeight,this.scroller.style[this.transformName]="translate3d(0,"+this.y+"px,0)",this.maxScrollY=-this.options.rowHeight*(this.data.length-1)},getVal:function(){return this.data[this.selectedIndex].value},setVal:function(t,i){for(var e,s,n=0,o=this.data.length;n<o;n++)if(s=this.data[n],s.value===t){s.disabled||(e=n);break}return e>=0&&this._scrollTo(e*-this.options.rowHeight,i?0:this.options.adjustTime,this.easings.scroll),e}},t.exports=s}])});